import material/material2tropic;

main() {

	makeTable = 
		\ -> {
			valConst = const([[MText("test", [])]]);
			valDyn = make([[MText("test", [])]]);
			valConst2 = const([[MText("test", [])], [MText("test", [])]]);
			valDyn2 = make([[MText("test", [])], [MText("test", [])]]);
			bc = const(1);
			b = make(1);
			b2 = make(4);
			c = fselect(b, FLift(\v -> v + 1));
			d = fselect2(b, b2, FLift2(\v, v1 -> v * v1));
			data = fselect(
				// bc,
				// b,
				// c,
				d,
				FLift(\v -> {
					println("here");
					[[MText(i2s(v), [])],/* [MText(i2s(v), [])]*/]
				})
			);
			timer(2000, \ -> {
				println("__________________");
				next(b, 2);
			});
			MDynamicDataTable(
				[MColumn("v", "", 50, [])],
				// valConst,
				// valConst2,
				// valDyn,
				// valDyn2,
				data,
				[MListReorder(make([]), const(true))]
			)
		};
	
	tableB = make(false);

	content = MLines2(
		MTextButton("Show", \ -> {println("_____________________"); reverseBehaviour(tableB)}, [], []),
		MSelect(tableB, \b -> if (b) makeTable() else MEmpty())
	);

	mrender(makeMaterialManager([]), true, content);
}
