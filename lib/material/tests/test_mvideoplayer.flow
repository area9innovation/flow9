import material/material2tropic;
import material/material_ui;

main() {
	manager = makeMaterialManager([]);
	setRendererType("html");

	subText = make("<b>Test</b>");
	timer(5000, \ -> next(subText, "Test loooooooooooong <b>looooooooooong</b> <i>video</i>subtitle"));

	subStyle = [
		BackgroundFill(MColor2int(MBackgroundColor(false))),
		FontSize(20.),
		EscapeHTML(false),
		MFill(MWhite())
	];

	subs = fselect(subText, FLift(\txt -> VideoSubtitle(txt, subStyle)));

	content =
		MVideoPlayer(
			"images/material_test/big_buck_bunny.mp4",
			// "http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4",
			// "https://www.youtube.com/watch?v=Q8TXgCzxEnw",

			// make(WidthHeight(400., 400.)),
			fwhsubtract(manager.stageWH, const(WidthHeight(400., 400.))),

			[
				FVideoSubtitles(subs),
				FVideoSubtitlesAlignBottom(),
				FVideoSubtitlesBottomBorder(10.),
				MPlayerControls([FullScreenPlayer(), SubtitlesControl()]),
				// MPlayerPanelAutoHide()
			]
		)
		|> (\m -> MBorder4(200., m));

	mrender(manager, true, content);
}