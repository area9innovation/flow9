import material/material_ui;

main () {
	close = make(false);
	manager = makeMaterialManager([]);

	content = make("");
	label = "Search";

	grapes = "Abbuoto
		Abouriou
		Abrusco
		Acitana
		Acolon
		Addoraca
		Agiorgitiko
		Aglianico
		Aglianicone
		Aidani
		Airén
		Aladasturi
		Alarije
		Albalonga
		Albana
		Albanella
		Albanello Bianco
		Albaranzeuli Bianco
		Albaranzeuli Nero
		Albarello
		Albariño
		Albarola
		Albarossa
		Albillo
		Alcañón
		Aleatico
		Alexandrouli
		Alfrocheiro Preto
		Alicante Bouschet
		Alicante Ganzin
		Aligoté
		Alionza
		Altesse
		Alvarelhão
		Amigne
		Ancellotta
		André
		Ansonica
		Antao Vaz
		Aragnan blanc
		Aragónez
		Aramon
		Arbane
		Arbois
		Areni
		Arilla
		Arinto
		Arneis
		Arnsburger
		Arrouya Noir
		Arrufiac
		Arvesiniadu
		Aspiran
		Asprinio Bianco
		Assario branco
		Assyrtiko
		Athiri
		Aubin
		Aubin vert
		Aubun
		Aurelius
		Auxerrois blanc
		Avanà
		Avarengo
		Avesso
		Azal branco
		Bacchus
		Baco blanc
		Baga
		Baiyu
		Balzac blanc
		Banat Riesling
		Baratuciat
		Barbarossa
		Barbaroux
		Barbera
		Barbera Sarda
		Barbera bianca
		Barbera del Sannio
		Barcelo
		Bariadorgia
		Baroque
		Barsaglina
		Bastardo
		Belina
		Bellone
		Benedino
		Besgano Bianco
		Bia blanc
		Bianca
		Biancame
		Bianchetta Trevigiana
		Bianchetti Genovese
		Bianco d'Alessano
		Biancolella
		Biancone di Portoferraio
		Biancu Gentile
		Bical
		Bigolona
		Black Muscat
		Blanc de Morgex
		Blatina
		Blatterle
		Blauburger
		Blauer Portugieser
		Blaufränkisch
		Boais
		Bobal
		Bogdanuša
		Bombino Bianco
		Bombino Nero
		Bonamico
		Bonarda Piemontese
		Bonda
		Bondola
		Borba blanca
		Borgonja Crna
		Borrado das Moscas
		Bosco
		Bouchalès
		Bourboulenc
		Bouteillan Noir
		Bouvier
		Bovale
		Boğazkere
		Bracciola Nera
		Brachetto
		Brancellao
		Bratislavské biele
		Breidecker
		Brugnola
		Brun Fourca
		Brustiano Bianco
		Bual
		Bubbierasco
		Budai Zöld
		Bukettraube
		Buonamico
		Burger
		Béquignol Noir
		Băbească neagră
		Cabernet Cubin
		Cabernet Franc
		Cabernet Mitos
		Cabernet Sauvignon
		Cabernet Severny
		Caddiu
		Cagnulari
		Caiño Tinto
		Caladoc
		Calitor
		Callet
		Caloria
		Camaralet
		Camaraou Noir
		Canaiolo
		Canari Noir
		Canari blanc
		Canina Nera
		Caprettone
		Carcajolo Nero
		Carica l'Asino
		Carignan
		Carignan blanc
		Carmine
		Carménère
		Carnelian
		Cascarolo Bianco
		Castelão
		Castets
		Catanese Nero
		Catarratto
		Cayetana
		Caíño blanco
		Centurian
		Cerceal
		Cereza
		Cesanese
		Chardonnay
		Chasan
		Chasselas
		Chenel
		Chenin blanc
		Cienna
		Ciliegiolo
		Cinsaut
		Clairette
		Claret de Gers
		Claverie
		Cococciola
		Cocur
		Coda di Pecora
		Coda di Volpe
		Codega
		Colombana Nera
		Colombard
		Colorino
		Completer
		Complexa
		Cornalin
		Cornifesto
		Cortese
		Corvina
		Counoise
		Courbu
		Crato
		Criolla Grande
		Croatina
		Crouchen
		Cserszegi Fűszeres
		Cygne blanc
		César
		Darkenuša
		Dattier
		Debina
		Debit
		Diagalves
		Dimiat
		Dinka
		Dobričić
		Dolcetto
		Domina
		Dona blanca
		Donzelinho branco
		Doradillo
		Dornfelder
		Douce Noir
		Douce Noire grise
		Drupeggio
		Dunkelfelder
		Duras
		Durella
		Dureza
		Durif
		Ederena
		Ehrenfelser
		Elbling
		Emerald Riesling
		Emir Karasi
		Encruzado
		Enfariné Noir
		Erbaluce
		Esgana Cão
		Espadeiro
		Esquitxagos
		Ezerjó
		Faber
		Falanghina
		False Pedro
		Farana
		Favorita
		Fer
		Fernao Pires
		Ferral
		Ferrón
		Fetească albă
		Fetească neagră
		Fetească regală
		Fiano
		Findling
		Fié
		Flora
		Folle blanche
		Fologosão
		Forastera
		Forcallat Tinta
		Fortana
		Francavida
		Francusa
		Frappato
		Freisa
		Freisamer
		Friulano
		Fromenteau
		Frontignan
		Frühroter Veltliner
		Fumin
		Furmint
		Gaglioppo
		Galego Dourado
		Gamaret
		Gamashara
		Gamay
		Garanoir
		Garganega
		Garnacha blanca
		Garnatxa
		Garrido
		Gellewza
		Gewürztraminer
		Girò
		Giró blanc
		Gloria
		Godello
		Goldburger
		Goldriesling
		Gouais blanc
		Gouget Noir
		Gouveio
		Graciano
		Graisse
		Grand Noir de la Calmette
		Grasa
		Grasă de Cotnari
		Grecanico
		Grechetto
		Greco
		Greco Bianco
		Greco Nero
		Green Hungarian
		Grenache blanc
		Grenache gris
		Grignolino
		Grillo
		Grisa Nera
		Grk Bijeli
		Grolleau
		Grolleau gris
		Gropello
		Gros Manseng
		Gros Verdot
		Grüner Veltliner
		Guardavalle
		Guarnaccia bianca
		Gueuche Noir
		Gutenborner
		Helfensteiner
		Heroldrebe
		Hondarrabi Zuri
		Hondarribi Beltza
		Hron
		Humagne Rouge
		Humagne blanche
		Huxelrebe
		Hárslevelű
		Incrocio Manzoni
		Inzolia
		Irsai Oliver
		Italia
		Izsáki Sarfehér
		Jacquère
		Jampal
		Jaén blanca
		Joubertin
		Juan Garcia
		Juhfark
		Jurancon Noir
		Juwel
		Kadarka
		Kakhet
		Kalecik Karasi
		Kanzler
		Karija l'Osü
		Keknyelu
		Kerner
		Kindzmarauli
		Knipperlé
		Koshu
		Kotsifali
		Kratosija
		Krstač
		Kujundžuša
		Kövérszőlő
		Lacrima di Morro
		Ladikino
		Lado
		Lagarino Bianco
		Lagorthi
		Lagrein
		Lambrusco
		Lauzet
		Len de l'El
		Liatiko
		Limnio
		Listan Negro
		Loureira
		Luglienga
		Lumassina
		Léon Millot
		Macabeo
		Maceratino
		Madeleine Angevine
		Madrasa
		Magarach Bastardo
		Magaratch Ruby
		Magliocco Canino
		Magliocco Dolce
		Magyarfrankos
		Majarcă Albă
		Malagousia
		Malbec
		Malvar
		Malvasia
		Malvasia di Schierano
		Malvoisie
		Mammolo
		Mandelaria
		Mandolari
		Manseng Noir
		Manteudo
		Manto Negro
		Mantonico Bianco
		Mara
		Maratheftiko
		Maria Gomes
		Marsanne
		Marselan
		Marsigliana
		Marzemina bianca
		Marzemino
		Mauzac
		Mauzac Noir
		Mavro
		Mavrodafni
		Mavrud
		Mayorquin
		Meghrabujr
		Melnik
		Melon de Bourgogne
		Mencia
		Merenzao
		Merille
		Merlot
		Merlot blanc
		Merseguera
		Meslier St-François
		Mezesfehér
		Milgranet
		Minella bianca
		Miousap
		Misket
		Mission
		Molette
		Molinara
		Moll
		Mondeuse
		Monica
		Montepulciano
		Montonico Bianco
		Montu
		Montù
		Moreto
		Morio-Muskat
		Moristel
		Mornen Noir
		Morrastel Bouschet
		Moscatel Rosada
		Moscatel de Austria
		Moscato Giallo
		Moschofilero
		Mourisco Tinto
		Mourvèdre
		Mouyssaguès
		Mtevandidi
		Mtsvane
		Mujuretuli
		Muscadelle
		Muscadet
		Muscardin
		Muscat
		Muscat Blanc à Petits Grains
		Muscat Bouschet
		Muscat Hamburg
		Muscat Ottonel
		Muscat of Alexandria
		Müller-Thurgau
		Nasco
		Nebbiolo
		Negoska
		Negrara
		Negroamaro
		Negru de Dragasani
		Neherleschol
		Nerello Mascalese
		Neretto di Bairo
		Nerkarat
		Nero Buono di Cori
		Nero d'Avola
		Neuburger
		Neyret
		Nielluccio
		Nincusa
		Nobling
		Nocera
		Nosiola
		Notardomenico
		Nuragus
		Négrette
		Oeillade Noire
		Ojaleshi
		Ondenc
		Optima
		Oraniensteiner
		Orion
		Ortega
		Ortrugo
		Oseleta
		Oz
		Pagedebit
		Pais
		Pallagrello Bianco
		Pallagrello Nero
		Palomino
		Pamid
		Pampanuto
		Pardillo
		Parellada
		Parč
		Pascal blanc
		Pascale di Cagliari
		Passerina
		Pecorello
		Pecorino
		Pedro Giménez
		Pedro Ximénez
		Pelaverga
		Peloursin
		Perdal
		Perle
		Perricone
		Persan
		Petit Bouschet
		Petit Courbu
		Petit Manseng
		Petit Meslier
		Petit Rouge
		Petit Verdot
		Petite Arvine
		Picardin
		Piccola Nera
		Picolit
		Picpoul
		Piedirosso
		Pigato
		Pignerol
		Pignola Valtellinese
		Pignoletto
		Pignolo
		Pineau d'Aunis
		Pinella
		Pinot Meunier
		Pinot Noir
		Pinot blanc
		Pinot gris
		Pinot jaune
		Pinotage
		Piquepoul
		Planta Fina
		Planta Nova
		Plassa
		Plavai
		Plavina
		Pollera Nera
		Portan
		Poulsard
		Pošip
		Prieto Picudo
		Prié blanc
		Prokupac
		Prosecco
		Prunesta
		Rabigato
		Rabo de Ovelha
		Raboso
		Raisin blanc
		Ramisco
		Rauschling
		Reberger
		Refosco
		Regner
		Reichensteiner
		Retagliado Bianco
		Ribolla
		Rieslaner
		Riesling
		Rimava
		Rkatsiteli
		Robola
		Roditis
		Roesler
		Rolle
		Rollo
		Romorantin
		Rondinella
		Rossese
		Rossese Bianco
		Rossignola
		Rossolino Nero
		Rotberger
		Roter Veltliner
		Rotgipfler
		Rouchet
		Roupeiro
		Roussanne
		Rovello Bianco
		Rubintos
		Ruby Cabernet
		Rufete
		Rèze
		Sabro
		Sacy
		Sagrantino
		Saint-Macaire
		Saint-Pierre Doré
		San Giuseppe Nero
		Sangiovese
		Saperavi
		Sarfeher
		Sauvignon blanc
		Sauvignon vert
		Savagnin
		Savatiano
		Scheurebe
		Schiava
		Schioppettino
		Schönburger
		Sciacarello
		Sciascinoso
		Segalin
		Septiner
		Sercial
		Sereksia
		Servanin
		Sgaretta
		Shiraz grape
		Shiroka Melnishka Losa
		Sideritis
		Siegerrebe
		Silvaner
		Smederevka
		Sousão
		Souvignier gris
		Spagnol
		Spätrot
		St. Laurent
		Ste Marie
		Sultana
		Sumoll
		Susumaiello
		Symphony
		Sémillon
		Tamarêz
		Taminga
		Tamîioasa
		Tannat
		Tarrango
		Tazzelenghe
		Tempranillo
		Tempranillo blanco
		Termarina rossa
		Teroldego
		Terrantez
		Terret Noir
		Terret gris
		Thiniatiko
		Tibouren
		Timorasso
		Tinta Amarela
		Tinta Barroca
		Tinta Caiada
		Tinta Carvalha
		Tinta Francisca
		Tinta Madeira
		Tinta Miuda
		Tinta Negra Mole
		Tinto Cão
		Torrontés
		Tourbat
		Touriga Franca
		Touriga Nacional
		Traminer
		Trbljan
		Trebbiano
		Treixadura
		Trepat
		Tresallier
		Trevisana Nera
		Trincadeira
		Trousseau gris
		Tsaoussi
		Tsolikauri
		Téoulier
		Usakhelauri
		Uva Rara
		Uva Tosca
		Uva di Troia
		Uvalino
		Vaccarese
		Valdiguié
		Valentino Nero
		Vega
		Verdea
		Verdeca
		Verdejo
		Verdelho
		Verdello
		Verdesse
		Verdicchio
		Verdil
		Verdiso
		Verdoncho
		Verduzzo
		Verduzzo Trevigiano
		Vermentino
		Vermentino Nero
		Vernaccia
		Vernaccia di Oristano
		Veroga
		Versoaln
		Vespaiola
		Vespolina
		Vien de Nus
		Vilana
		Vinhao
		Viognier
		Viosinho
		Vital
		Vitovska
		Viura
		Volidza
		Voskehat
		Vranac
		Vugava
		Vuillermin
		Weldra
		Welschriesling
		Wildbacher
		Würzer
		Xarel·lo
		Xynisteri
		Xynomavro
		Zala Gyöngye
		Zalema
		Zefir
		Zenit
		Zeusz
		Zierfandler
		Zinfandel
		Zweigelt
		Zéta
		Étraire
		Öküzgözü
		Žametovka
		Žilavka
		Žlahtina";

	autoComplete = MSelect(content, \con -> MTextButton(if (con == "") label else con, \ -> {
		close2 = make(false);
		foc = make(true);

		ShowMDialog(manager, close2, [MDialogFullScreen(), MDialogCustomFrame(100., 100., 100., 100., TEmpty())],
			MConstruct(
				[\ -> subscribe2(foc, \f ->  timer(15, \ -> if (!getValue(foc)) next(close2, true)))],
				MAutoComplete(content, [grapes], [MLabel("Search"), MWidth(400.), MMaxHeight(200.), MShowLeftButton(true)], [TTextInputFocus(foc)])
			)
		);
	}, [], [MOnLongClick(\ -> println("long click")), MOnLongTouch(\ -> println("long touch")), MOnClick(\ -> println("click"))]));

	fn = \ ->
			ShowMDialog(
				manager,
				close,
				[MDialogFullScreen()],
				MBaselineCols([
					TRectangle([Fill(yellow)], TFixed(200., 200.)),
					MTextButton("CLOSE", \ -> next(close, !getValue(close)), [], []),
					autoComplete
				])
			);

	MTextButton(
		"show dialog",
		fn,
		[],
		[]
	)
	|> (\f ->
		MBaselineCols([
			f,
			autoComplete,
			MTextInput(make(""), [], [MInputFilter(\t, foc -> {if (t == "a") fn(); t;})])
		])
	)
	|> (\f ->
		MAppStructure(
			[
				MContent(f),
			],
			[]
		)
	)
	|> (\f -> mrender(manager, true, f))
}

