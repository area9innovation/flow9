import material/material2tropic;

main() {

	manager = makeMaterialManager([]);

	show = make(true);
	timer(2000, \ -> nextDistinct(show, false));
	timer(15000, \ -> nextDistinct(show, true));

	progress = make(1.);
	fpprint("progress")(progress);

	content =
		MGroup2(
			TRectangle([MFill(MGreen(500))], TFixed(200., 200.)),
			MText("text", []) |> (\m -> MDebug(red, m))
		)
		|> (\m -> MAnimator(m, show, [
			MAnimationDuration(const(10.)),
			// MFadeAnimation(),
			MScaleAnimation([
				MScaleAnimationCustomFactor(const(Factor(0.5, 0.5))),
				MCenterMode()
			]),
			// MTranslateAnimation(
			// 	// MTranslatePosition(const(Point(500., 500.)))
			// 	// MBottom()
			// 	MTop()
			// 	// MLeft()
			// 	// MRight()
			// ),
			MRotateAnimation([
				MRotateAnimationCustomAngle(const(90.)),
				MCenterMode()
			]),
			MExpanderProgress(progress),
			// MNoCrop()
		]))
		|> (\m -> MGroup2(m, MFrame(0., 0., [MStroke(MRed(500))], TFixed(200., 200.))))
		|> MBorderTop(200.)
		|> MBorderLeft(200.);

	// rotated =
	// 	MText("some test text", [])
	// 	|> (\m ->
	// 		MGroup([
	// 			MRotate(const(0.), m),
	// 			MRotate(const(-45.), m),
	// 			MRotate(const(-90.), m),
	// 			MRotate(const(45.), m),
	// 			MRotate(const(90.), m),
	// 			MRotate(const(180.), m)
	// 		])
	// 	)
	// 	|> (\m -> MBorder4(200., m));

	mrender(manager, true, content);
}