import material/material2tropic;

main() {
	manager = makeMaterialManager([]);

	scrollContent =
		TFixed(800., 1800.)
		|> addTBackground(MGreen(200));

	spin = make(false);
	fpprint("spin")(spin);

	content =
		MScroll(
			scrollContent,
			TFillXY(),
			[
				TScrollCropByContent(),
				MScrollSpinner(spin, [
					MFill(MRed(900)),
					FillOpacity(0.5),
					MScrollSpinnerOffset(100., 80.),
					MCustomSpinner(\draggingMouseY, iterationPrc, releasePrc, resetPrc ->
						MTranslate(fpoint(const(0.0), fselect(draggingMouseY, FLift(\y -> min(either(y, 0.), 50.)))),
							MSelect3(iterationPrc, releasePrc, resetPrc, \it, rel, res ->
								MText("TEST"
									+ "\niterationPrc : " + d2s(it)
									+ "\nreleasePrc : " + d2s(rel)
									+ "\nresetPrc : " + d2s(res),
									[]
								)
							)
						)
					)
				]),
				TScrollPercent(make(Point(0., 1.))),
			]
		)
		|> (\m -> MConstruct([makeSubscribe2(spin, \s -> if (s) timer(2000, \ -> nextDistinct(spin, false)))], m))
		|> MDebugPurple;

	mrender(manager, true, content);
}