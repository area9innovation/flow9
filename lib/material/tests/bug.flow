import material/material;
import material/material_manager;
import material/material2tropic;

main () {
	arr = [
		MText("dd", []),
		MText("dd", []),
		MText("dd", []),
		MText("dd", []),
		MText("dd", []),
		MText("dd", []),
		MLetterIcon("text", [MIconSize(56.0), FillOpacity(1.)], []),
		MText("dd", []),
		MText("dd", []),
		MText("dd", []),
		MText("dd", []),
		MText("dd", []),
		MText("dd", []),
		MLetterIcon("text", [MIconSize(56.0), FillOpacity(1.)], []),
		MText("dd", []),
		MText("dd", []),
		MText("dd", []),
		MLetterIcon("text", [MIconSize(56.0), FillOpacity(1.)], []),
		MLetterIcon("text", [MIconSize(56.0), FillOpacity(1.)], []),
		MLetterIcon("text", [MIconSize(56.0), FillOpacity(1.)], []),
		MLetterIcon("text", [MIconSize(56.0), FillOpacity(1.)], []),
		MLetterIcon("text", [MIconSize(56.0), FillOpacity(1.)], []),
		MLetterIcon("text", [MIconSize(56.0), FillOpacity(1.)], []),
		MLetterIcon("text", [MIconSize(56.0), FillOpacity(1.)], []),
		MLetterIcon("text", [MIconSize(56.0), FillOpacity(1.)], []),
		MLetterIcon("text", [MIconSize(56.0), FillOpacity(1.)], []),
		MLetterIcon("text", [MIconSize(56.0), FillOpacity(1.)], []),
		MText("dd", []),
		MText("dd", []),
		MText("dd", []),
		MText("dd", []),
		MText("dd", []),
		MText("dd", []),
		MLetterIcon("text", [MIconSize(56.0), FillOpacity(1.)], []),
		MText("dd", []),
		MText("dd", []),
		MText("dd", []),
		MText("dd", []),
		MText("dd", []),
		MText("dd", []),
		MLetterIcon("text", [MIconSize(56.0), FillOpacity(1.)], []),
		MText("dd", []),
		MText("dd", []),
		MText("dd", []),
		MLetterIcon("text", [MIconSize(56.0), FillOpacity(1.)], []),
		MLetterIcon("text", [MIconSize(56.0), FillOpacity(1.)], []),
		MLetterIcon("text", [MIconSize(56.0), FillOpacity(1.)], []),
		MLetterIcon("text", [MIconSize(56.0), FillOpacity(1.)], []),
		MLetterIcon("text", [MIconSize(56.0), FillOpacity(1.)], []),
		MLetterIcon("text", [MIconSize(56.0), FillOpacity(1.)], []),
		MLetterIcon("text", [MIconSize(56.0), FillOpacity(1.)], []),
		MLetterIcon("text", [MIconSize(56.0), FillOpacity(1.)], []),
		MLetterIcon("text", [MIconSize(56.0), FillOpacity(1.)], []),
		MLetterIcon("text", [MIconSize(56.0), FillOpacity(1.)], []),
	];

	sortedMessagesB = make(arr);
	ib = make(length(arr));
	
	list = MDynamicList(
		fmap(sortedMessagesB, \msg -> MCustomLine(msg, [])),
		[MAddSeparators(), MSideBorders(const(0.0))],
		[
			MItemsHeights(\__ -> const(1.0))
		]
	);

	mrender(makeMaterialManager([]), false, MLines([
		MSelect(ib, \i -> MText(i2s(i), [])),
		MTextButton(_("TEST"), \-> {i = floor(random()*40.0); nextDistinct(ib, i); nextDistinct(sortedMessagesB, take(arr, i))}, [], []),
		list
	]));
}


