import promise;

main() {
	
	promisesFail = [
		Promise(\f, r -> {f(7); timer(100, \-> f(15))}),
		Promise(\f, r -> {timer(100, \-> f(16))}),
		Promise(\f, r -> {}),
		Promise(\f, r -> {f(21); f(22); f(23); f(24)})
	];


	doneP(parallelP(promisesFail), \r -> println("DONE: "+toString(r)), println);
	
	println("EXIT");
	quit(0);
}
