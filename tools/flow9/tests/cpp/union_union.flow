native println : io (?) -> void = Native.println;
native isSameStructType : (value1 : ?, value2 : ??) -> bool = Native.isSameStructType;

Struct1();
Struct2();
Struct3();
Struct4();
Struct5();

Union1 ::= Struct1, Struct2;
Union2 ::= Struct3, Struct4;

// TODO: flat union? -> UnionUnion ::= Struct1, Struct2, Struct3, Struct4, Struct5;
UnionUnion ::= Union1, Union2, Struct5;

compareUnions1(union1 : UnionUnion, union2 : UnionUnion) -> bool {
	isSameStructType(union1, union2)
}

compareUnions2(union1 : UnionUnion, union2 : Union2) -> bool {
	isSameStructType(union1, union2)
}

main() {
	println(compareUnions1(Struct1(), Struct4())); // false
	println(compareUnions1(Struct4(), Struct4())); // true
	println(compareUnions1(Struct1(), Struct5())); // false

	// TODO
	/*switch (Struct1() : UnionUnion) {
		Struct1() : println("part of a subunion");
		Struct2() : println("part of a subunion");
		Union2() : println("union inside the union");
		Struct5() : println("independent item");
	}*/
}
