import gringo/gringo_ast;
import gringo/gringo_env;
import gringo/gringo_action;
import ds/tree;

export {
	GCodeEnv(
		// The string we are parsing
		input : string,
		// The action function
		action : GringoAction<?>,
		// The output produced so far
		output : ?,
		// What errors did we get?
		errors : Tree<int, string>,
		// The position in the input
		i : int,
		// Did parsing fail?
		fail : bool,
		// What is the longest we have parsed?
		maxi : int,
	);

	GringoEnv2GCodeEnv(c : GringoEnv) -> GCodeEnv;

	GCodeEnv2GringoEnv(c : GCodeEnv) -> GringoEnv;
}

GringoEnv2GCodeEnv(c : GringoEnv) -> GCodeEnv {
	GCodeEnv(
		c.input, 
		c.action, c.output, c.errors,
		c.i, c.fail, c.maxi
	)
}

GCodeEnv2GringoEnv(c : GCodeEnv) -> GringoEnv {
	GringoEnv(
		c.input, makeTree(),
		c.action, c.output, c.errors,
		c.i, c.fail, c.maxi
	)
}
