import tools/flowc/backends/common;

export {
	buildFiJarFile(cfg : FiJavaConfig, path : string, callback : () -> void) -> void;
}

buildFiJarFile(cfg : FiJavaConfig, path : string, callback : () -> void) -> void {
	jar = changeFileExt(cfg.jarfile, ".jar");
	println("\"%JAVA_HOME%\\bin\\javac\" -Xlint:unchecked -encoding UTF-8 -cp platforms/java " + path + "/*.java");
	println("\"%JAVA_HOME%\\bin\\jar\" cf " + jar + " -C platforms/java com/area9innovation/flow/");
	println("\"%JAVA_HOME%\\bin\\jar\" feu " + jar + " com.area9innovation.flow.Main -C " + cfg.outputdir + " com/area9innovation/flow");
	println("Run with \"java -jar " + jar + "\"");
	callback();
}
