import ds/tree;

export {
	fiJsNative(name: string) -> Maybe<string>;
}

js_natives : ref Maybe<Tree<string, string>> = ref None();

fiJsNative(name: string) -> Maybe<string> {
	natives = onlyOnce(js_natives, fiJsNativesDefinitions);
	lookupTree(natives, name);
}

fiJsNativesDefinitions() -> Tree<string, string> {
pairs2tree([
Pair("makeNativeHashMap",
"function $F_0(makeNativeHashMap)(hash, cap, load) {
	return new Map();
}\n"),
Pair("setNativeHashMap",
"function $F_0(setNativeHashMap)(m, key, value) {
	m.set(key, value);
}\n"),
Pair("getNativeHashMap",
"function $F_0(getNativeHashMap)(m, key) {
	return m.has(key) ? $F_1(Some)(m.get(key)) : $F_1(None);
}\n"),
Pair("removeNativeHashMap",
"function $F_0(removeNativeHashMap)(m, key) {
	m.delete(key);
}\n"),
Pair("containsNativeHashMap",
"function $F_0(containsNativeHashMap)(m, key) {
	return m.has(key);
}\n"),
Pair("sizeNativeHashMap",
"function $F_0(sizeNativeHashMap)(m) {
	return m.size;
}\n"),
Pair("clearNativeHashMap",
"function $F_0(clearNativeHashMap)(m) {
	m.clear();
}\n"),
Pair("cloneNativeHashMap",
"function $F_0(cloneNativeHashMap)(m) {
	var clone = new Map();
	m.forEach((v, k) => clone.set(k, v));
	return clone;
}\n"),
Pair("iterNativeHashMap",
"function $F_0(iterNativeHashMap)(m, f) {
	m.forEach((v, k) => f(k, v))
}\n"),
Pair("funcNativeHashMap",
"function $F_0(funcNativeHashMap)(m) {
	return (x) => x.hashCode();
}\n"),
]);
}
