import tools/flowc/backends/cpp2/fi2cpp_compile;
import tools/flowc/backends/common;

export {
	fi2cpp2(program : FiProgram, cfg : FcCppConfig, callback : () -> void) -> void;
}

fi2cpp2(program : FiProgram, cfg : FcCppConfig, callback : () -> void) -> void {
	if (cfg.verbose > 0) {
		fcPrintln("Making cpp '" + cfg.flowfile + "'...");
	}
	writer = cpp2Writer(cfg.includes, program, cfg.debug, "native_program", dirName(cfg.outputfile), true);
	cpp2WriterEmitCommonAndTables(writer);
	callback();
}
