import tools/flowc/backends/common;

export {
	fi2nimRuntime(cfg : FiNimConfig) -> string;
	fi2nimNatives(cfg : FiNimConfig) -> string;
	fi2nimAssemble(cfg : FiNimConfig, content : [string]) -> void;
}

fi2nimRuntime(cfg : FiNimConfig) -> string {
	// Use include, not import to avoid exporting issues.
	"#include tools/flowc/backends/nim/runtime.nim" + "\n\n"
	//"{.push warning[SmallLshouldNotBeUsed]:off.}\n";
}

fi2nimNatives(cfg : FiNimConfig) -> string {
	// Use include, not import to avoid exporting issues.
	"#include tools/flowc/backends/nim/natives.nim" + "\n\n" +
	"{.push warning[SmallLshouldNotBeUsed]:off.}\n";
}

fi2nimAssemble(cfg : FiNimConfig, content : [string]) -> void {
	saveFileContent(cfg.outputfile, concatStrings(content), cfg.threadId);
}
