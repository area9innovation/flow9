import string;

//a = ref "aaa";
test3_S(fld: int);

test3_Pair(first: ?, second: ??);

fact(i: int, acc: int) -> int {
	if (i == 0) acc else {
		fact(i - 1, i * acc);
	}
}

test1_A(a: int, b: string, c: [int]);
test1_B(x: [int]);
test1_C(a: int);


test1() {
	zz = test1_B([1, 2, 3]);
	println2("A: " + toString(zz.x));
	println2("1: '" + toString(1) + "'");
	println2("true: '" + toString(true) + "'");
	println2("2.78: '" + toString(2.78) + "'");
	println2("\"AAA\": '" + toString("AAA") + "'");

	println2("AAAA!!!!!!!!!!!!!!!---------------------");
	z = test1_A(2, "XXX00", [5, 6, 7]);
	println2("z='" + toString(z) + "'");
	println2("z.b='" + toString(z.b) + "'");
	println2("z.c='" + toString(z.c) + "'");
	println2("[1, 2, 3]: '" + toString([1, 2, 3]) + "'");
	println2("1=" + toString(1));
	println2("END.");
}

main() {
	println2(i2s(
		fold([1], 
			test3_S(0), 
			\acc, x -> test3_S(x)
		).fld
	));
	println2(
		fold([test3_Pair(1, 2), test3_Pair(3, 4)], 0, \acc, x -> acc + x.first + x.second)
	);

	println2(i2s(fold([], test3_S(0), \acc, x -> test3_S(x)).fld));
	println2(fold([1], test3_S(0), \acc, x -> test3_S(x)).fld);
	println2(i2s(fold([1, 2], test3_S(0), \acc, x -> test3_S(x)).fld));
	
	x_AAA = test3_S(15);
	(\-> { println2(x_AAA); })();

	println2(fact(5, 1));
	
	z = test1_C(2);
	println2(z);
	println2(z);

	println2(z.a);
	
	x = "AAA";
	idfn(x);
	println2(x);

	quit(0);
}
