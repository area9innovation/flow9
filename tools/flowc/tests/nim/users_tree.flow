import date;

User(
	id : int,
	email : string,
	firstName : string,
	lastName : string,
	userName : Maybe<string>,
	createdAt : Time,
	valid : bool,
	avatar : string,
	phone : string,
	dateOfBirth : Date,
	active : bool,
	passwordSetDate : Date,
	trusted : bool
);


makeDummyUser(id : int) -> User {
	User(
		id,
		"user" + i2s(id) + "@area9.dk", // email
		"Name", // firstName
		"UID" + i2s(id), // lastName
		Some("user_" + i2s(id)), // userName
		getCurrentTime(),
		true, // valid
		"link_" + d2s(random()), // avatar
		"", // phone
		time2date(getCurrentTime()),// getCurrentDate(), // dateOfBirth // TODO
		true, // active
		nullDate, // passwordSetDate
		false, // trusted
	);
}

main() {
	t1 = timestamp();
	users = generate(1, 1000001, makeDummyUser);
	t2 = timestamp();
	println("Create array : " + d2s(t2-t1) + " ms");
	uTree = values2tree(users, \u -> u.id);
	t3 = timestamp();
	println("Create tree : " + d2s(t3-t2) + " ms");
	println("Created tree. Size=" + i2s(sizeTree(uTree)));
	println(toString(users[1000000 - 1]));
	println(toString(lookupTree(uTree, 1000000)));

	quit(0);
}