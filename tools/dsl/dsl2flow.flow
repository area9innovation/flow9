import tools/dsl/dsl_ast;
import dynamic;
import ds/array;

export {
	dsl2flow(d : DslAst) -> flow;
}

dsl2flow(d : DslAst) -> flow {
	switch (d) {
		DslBool(value): flow(value);
		DslInt(value): flow(value);
		DslDouble(value): flow(value);
		DslString(value): flow(value);
		DslList(value): list2array(mapList(value, dsl2flow));
		DslNode(name, args, pos): {
			makeStructValue(name, map(args, dsl2flow), d);
		}
	}
}
