import fusion;

main(){
	iB = make(0);
	fB = make(0.0);

	fsubscribe(iB, \i -> println("fsubscribe " + i2s(i)));
	fselect(iB, FLift(\i -> println("fselect " + i2s(i))));
	fsubscribe(fB, \f -> println("fsubscribe " + d2s(f)));
	fselect(fB, FLift(\f -> println("fselect " + d2s(f))));

	timer(5000, \-> {
		println("set i=5");
		nextDistinct(iB, 5);
		nextDistinct(fB, 5.0);
	});
	timer(10000, \-> {
		println("set i=10");
		nextDistinct(iB, 10);
		nextDistinct(fB, 10.0);
	});
}