import mediabunny;
import runtime;
import net/http;

main() {
	url = "./images/material_test/big_buck_bunny.mp4";

	makeFileByBlobUrl(url, "big_buck_bunny", \file -> {
		mbGetMediaDuration(file, \duration -> {
			println(duration)
		});
		mbExtractAudio(file, [
			MBAudioFormat(MBAudioWAV()),
		], \audioData -> {
			saveNativeFileClient("audio", audioData)
		}, \err -> println("[ERROR] mbExtractAudio WAV: " + err))
		mbExtractAudio(file, [
			MBAudioFormat(MBAudioMP3()),
		], \audioData -> {
			saveNativeFileClient("audio", audioData)
		}, \err -> println("[ERROR] mbExtractAudio MP3: " + err))
	}, \err -> println("[ERROR] makeFileByBlobUrl: " + err))

}